{% extends 'registros/base.html' %}

{% block title %}Historial de Trabajos{% endblock %}

{% block content %}
<div class="card p-4">
    <h1 class="mb-4">Historial</h1>
    <form method="get" class="needs-validation" novalidate>
        {{ filter.form.as_p }}
        <button type="submit" class="btn btn-warning">Filtrar</button>
    </form>
    <a href="{% url 'export_historial_xlsx' %}" class="btn btn-success mt-4">Descargar XLSX</a>
    <div class="table-responsive mt-4">
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Fecha</th>
                    <th>Faena</th>
                    <th>M치quina</th>
                    <th>Trabajo</th>
                    <th>Hor칩metro Inicial</th>
                    <th>Hor칩metro Final</th>
                    <th>Total de Horas</th>
                    <th>Petr칩leo (litros)</th>
                    <th>Aceite (tipo y litros)</th>
                    <th>Observaciones</th>
                    <th>Supervisor</th>
                    <th>Trabajador</th>
                    <th>Aprobado</th>
                </tr>
            </thead>
            <tbody>
                {% for trabajo in filter.qs %}
                <tr>
                    <td>{{ trabajo.fecha }}</td>
                    <td>{{ trabajo.faena }}</td>
                    <td>{{ trabajo.maquina }}</td>
                    <td>{{ trabajo.trabajo }}</td>
                    <td>{{ trabajo.horometro_inicial }}</td>
                    <td>{{ trabajo.horometro_final }}</td>
                    <td>{{ trabajo.total_horas }}</td>
                    <td>{{ trabajo.petroleo }}</td>
                    <td>{{ trabajo.aceite }}</td>
                    <td>{{ trabajo.observaciones }}</td>
                    <td>{{ trabajo.supervisor }}</td>
                    <td>{{ trabajo.trabajador }}</td>
                    <td>{{ trabajo.aprobado }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
